var O=Object.defineProperty;var N=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var k=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))A.call(t,n)&&k(e,n,t[n]);if(N)for(var n of N(t))C.call(t,n)&&k(e,n,t[n]);return e};import{j as b,C as E,R as v,u as j,r as l,a as x,O as _,S as R,b as S,c as m,D as $,d as B,V as M,s as D,L as F,e as J,B as V,f as W,g as L,h as z}from"./vendor.1a65e961.js";const H=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};H();function U(e){for(let t=0;t<e.length;t++)e[t]/=math.norm(e)}function u(e,t){return e.map(n=>n*t)}function q(e,t,n){return math.add(u(t,Math.cos(e)),u(math.cross(n,t),Math.sin(e)),u(n,math.dot(n,t)*(1-Math.cos(e))))}function I(e,t){return 2*Math.PI*(e%t)/t}const P={_events:{},emit(e,t){!this._events[e]||this._events[e].forEach(n=>n(t))},on(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},unsubscribe(e){!this._events[e]||delete this._events[e]}},i=b.exports.jsx,c=b.exports.jsxs,p=b.exports.Fragment;function G(e){const t=[10,10,10],n=[-10,0,20];let s=234488,o=7200,r={semiMajor:t,semiMinor:n,velocity:o,metersToUnits:s,sunPeriod:s*2*Math.PI*Math.sqrt(math.norm(t)+math.norm(n)/2)/o,flubbedPeriod:26*60*60,familyTimeZone:"America/Los_Angeles",meetings:[{time:4*60*60,person:"Holly",link:"https://lol",description:"Daily time with my wife"},{time:7*60*60,person:"David",link:"https://lol",description:"Catching up with an old friend"},{time:-4*60*60,person:"Frank",link:"https://lol",description:"Meeting with Houston"}]};localStorage.setItem("backendInfo",JSON.stringify(r));const a=math.subtract([0,0,0],t),d=math.subtract([0,0,0],n);return c(p,{children:[i(E,{start:t,end:a,midA:math.add(n,t),midB:math.add(n,a),color:"white",lineWidth:1,dashed:!0}),i(E,{start:t,end:a,midA:math.add(d,t),midB:math.add(d,a),color:"white",lineWidth:1,dashed:!0})]})}const Z=e=>v.forwardRef((n,s)=>{const o=j();return i(e,f({navigate:o,forwardRef:s},n))});class K extends v.Component{constructor(t){super(t);this.state={meeting:null},P.on("newMeeting",n=>{this.setState({meeting:n})})}render(){return c("div",{className:"overlay",children:[c("div",{className:"time",children:[i("div",{className:"hour",children:"10:06"}),i("div",{className:"date",children:"Jan. 06 2043"})]}),this.state.meeting&&c("div",{className:"card",children:[i("h1",{children:this.state.meeting.person}),i("h2",{children:this.state.meeting.time}),i("div",{children:this.state.meeting.description}),i("div",{onClick:()=>this.props.navigate("/video"),className:"join",children:"Join Meeting"})]})]})}}var Q=Z(K);function X(e){const{scene:t}=S("earth.glb"),[n,s]=l.exports.useState(0);return m(({clock:o})=>{s(o.getElapsedTime()/5)}),i("primitive",f({rotation:[0,Math.PI+n,0],position:[0,0,0],scale:[.1,.1,.1],object:t},e))}function Y(){const e=v.useRef(),t=[-20,30,0],n=[0,0,-20];let s=math.cross(t,n);return U(s),m(({camera:o,clock:r})=>{let a=q(I(r.getElapsedTime(),100),t,s);e.current.position.x=a[0],e.current.position.y=a[1],e.current.position.z=a[2]}),c(p,{children:[i("directionalLight",{ref:e,position:[-20,30,0],intensity:.7}),i("ambientLight",{intensity:.03})]})}function ee(){const[e,t]=l.exports.useState(.8458134067357136),[n,s]=l.exports.useState(0),[o,r]=l.exports.useState(()=>{const a=localStorage.getItem("backendInfo"),d=JSON.parse(a),y=d.meetings;//! this is flub, rm for actual later
for(let h of y){h.theta=I(h.time,d.flubbedPeriod),h.time=$.local().ts/1e3+h.time;let g=math.add(u(d.semiMajor,Math.cos(h.theta)),u(d.semiMinor,Math.sin(h.theta)));h.position=u(g,.82)}return y||""});return m(({camera:a},d)=>{const y=localStorage.getItem("backendInfo"),h=JSON.parse(y);let g=math.add(u(h.semiMajor,Math.cos(e)),u(h.semiMinor,Math.sin(e)));g=u(g,5),n<500&&(a.position.lerp(new M(...g),.05),a.lookAt(new M(0,0,0)),a.updateProjectionMatrix(),s(n+1))}),o?i(p,{children:o.map((a,d)=>i(B,{onClick:()=>{t(a.theta),P.emit("newMeeting",a),s(0)},position:a.position,children:i("meshPhongMaterial",{attach:"material",color:"#D8BE99"})},d))}):null}function te(){const e=l.exports.useRef();return c(p,{children:[c(x,{concurrent:!0,gl:{alpha:!1},camera:{position:[0,0,100],fov:15},children:[i(_,{}),i(R,{}),c(l.exports.Suspense,{fallback:null,children:[c("group",{children:[i(G,{}),i(ee,{})]}),i(X,{}),i(Y,{})]})]}),i(Q,{ref:e})]})}D();function w(e,t){return e.map(n=>n*t)}function ne(e,t,n){return math.add(w(t,Math.cos(e)),w(math.cross(n,t),Math.sin(e)),w(n,math.dot(n,t)*(1-Math.cos(e))))}function ie(e,t){return 2*Math.PI*(e%t)/t}function oe(e){const{scene:t}=S("earth.glb"),[n,s]=l.exports.useState(0);return m(({clock:o})=>{o.getElapsedTime()>=2&&s((o.getElapsedTime()-2)/4)}),i("primitive",f({rotation:[0,Math.PI+n,0],position:[0,0,0],scale:[.03,.03,.03],object:t},e))}function se(){const e=v.useRef(),t=[-20,30,0],n=[0,0,-20];let s=math.cross(t,n);return s=s.map(o=>o/math.norm(s)),m(({clock:o})=>{let r=ne(ie(o.getElapsedTime(),20),t,s);e.current.position.x=r[0],e.current.position.y=r[1],e.current.position.z=r[2]}),m(({clock:o,camera:r})=>{r.lookAt(0,0,0),r.updateProjectionMatrix(),o.getElapsedTime()>2&&r.position.lerp(new M(0,0,35),.05)}),i("directionalLight",{ref:e,position:[-20,30,0],intensity:.7})}function re(e){const t=j();return c(p,{children:[c("div",{className:"Auth",children:[i("h1",{className:"title",children:"Timely"}),i("button",{className:"login-button",onClick:()=>t("/home"),children:"Login"})]}),c(x,{concurrent:!0,gl:{alpha:!1},camera:{position:[0,0,1e3],fov:15},children:[i(R,{}),c(l.exports.Suspense,{fallback:null,children:[i(oe,{}),i(se,{})]})]}),i(F,{})]})}function ae({ready:e,clicked:t,setClicked:n}){return i(p,{children:i("div",{className:`fullscreen bg ${e?"ready":"notready"} ${t&&"clicked"}`,children:i("div",{onClick:()=>{e&&n(!0)},children:e?"click to continue":"loading"})})})}function ce(e){const{scene:t}=S("livingroom.glb");return i("primitive",f({object:t},e))}function le(){const[e,t]=l.exports.useState(!1),[n,s]=l.exports.useState(!1);l.exports.useRef();const o={clicked:e,setClicked:t,ready:n,setReady:s};return c(p,{children:[i(x,{concurrent:!0,gl:{alpha:!1},pixelRatio:[1,1.5],camera:{position:[0,3,100],fov:15},children:c(l.exports.Suspense,{fallback:null,children:[i("group",{position:[0,-1,0],children:i(ce,{rotation:[.05,Math.PI-1,.05],position:[-1,3.5,9],scale:[.15,.15,.15]})}),i("ambientLight",{intensity:.5}),i("spotLight",{position:[0,10,0],intensity:.3}),i("directionalLight",{position:[-20,0,-10],intensity:.7}),i(de,{start:n&&e,set:s})]})}),i(ae,f({},o))]})}function de({start:e,set:t}){const[n]=l.exports.useState(()=>new M);return l.exports.useEffect(()=>setTimeout(()=>t(!0),500),[]),m(s=>{e&&(s.camera.position.lerp(n.set(s.mouse.x*.5,3+s.mouse.y*.2,14),.05),s.camera.lookAt(0,0,0))})}z.defaultZoneName="London/Greenwich";let T="";T="/frontend";J.render(i(v.StrictMode,{children:i(V,{basename:T,children:c(W,{children:[i(L,{exact:!0,path:"/",element:i(re,{})}),i(L,{path:"/home",element:i(te,{})}),i(L,{path:"/video",element:i(le,{})})]})})}),document.getElementById("root"));
